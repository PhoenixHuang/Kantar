var VirtualShelf=(function(){function a(){this.qStudioVar={interact:true,isDC:false,params:this.initParams(),rowArray:[],selectArray:[],qtyArray:[],timeArray:[]}}a.prototype={renderDC:function(b){this.qStudioVar.interact=true;this.qStudioVar.isDC=true;this.create(b)},renderSD:function(b){this.qStudioVar.interact=false;this.qStudioVar.isDC=false;this.create(b)},renderDEMO:function(b){this.qStudioVar.interact=true;this.qStudioVar.isDC=false;this.create(b)},rowArray:function(){var b=arguments[0];if(typeof b==="undefined"){return this.qStudioVar.rowArray}if(jQuery.isArray(b)){this.qStudioVar.rowArray=b}},selectArray:function(){var b=arguments[0];if(typeof b==="undefined"){return this.qStudioVar.selectArray}if(jQuery.isArray(b)){this.qStudioVar.selectArray=b}},qtyArray:function(){var b=arguments[0];if(typeof b==="undefined"){return this.qStudioVar.qtyArray}if(jQuery.isArray(b)){this.qStudioVar.qtyArray=b}},timeArray:function(){var b=arguments[0];if(typeof b==="undefined"){return this.qStudioVar.timeArray}if(jQuery.isArray(b)){this.qStudioVar.timeArray=b}},dimensions:function(){return[{name:"rowArray",prop:["label","image","description","price_count","width_height"]},{name:"selectArray",prop:["label"]},{name:"qtyArray",prop:["label"]},{name:"timeArray",prop:["label"]}]},params:function(){var b=arguments[0];if(typeof b==="undefined"){var f=[],d=QUtility.orderParams(this.qStudioVar.params);for(var e in d){if(d.hasOwnProperty(e)){var g={parameter:e,paramvalue:this.qStudioVar.params[e].value,paramdescription:this.qStudioVar.params[e].description,paramtype:this.qStudioVar.params[e].type,paramname:this.qStudioVar.params[e].name,paramwgtref:this.qStudioVar.params[e].wgtref,paramwgtname:this.qStudioVar.params[e].wgtname};if(this.qStudioVar.params[e].order){g.paramorder=this.qStudioVar.params[e].order}if(this.qStudioVar.params[e].min){g.parammin=this.qStudioVar.params[e].min}if(this.qStudioVar.params[e].max){g.parammax=this.qStudioVar.params[e].max}if(this.qStudioVar.params[e].step){g.paramstep=this.qStudioVar.params[e].step}if(this.qStudioVar.params[e].options){g.paramoptions=this.qStudioVar.params[e].options}f.push(g)}}return f}if(jQuery.isArray(b)){for(var e=0,c=b.length;e<c;e+=1){var g=this.qStudioVar.params[b[e].parameter]||{};this.qStudioVar.params[b[e].parameter]=g;if(typeof b[e].paramvalue!=="undefined"){g.value=b[e].paramvalue}if(typeof b[e].paramdescription!=="undefined"){g.description=b[e].paramdescription}if(typeof b[e].paramtype!=="undefined"){g.type=b[e].paramtype;if(g.type.toLowerCase()==="number"&&typeof g.value==="string"){g.value=parseInt(g.value,10)}}if(typeof b[e].paramname!=="undefined"){g.name=b[e].paramname}if(typeof b[e].paramwgtref!=="undefined"){g.wgtref=b[e].paramwgtref}if(typeof b[e].paramwgtname!=="undefined"){g.wgtname=b[e].paramwgtname}if(typeof b[e].paramorder!=="undefined"){g.order=b[e].paramorder}if(typeof b[e].parammin!=="undefined"){g.min=b[e].parammin}if(typeof b[e].parammax!=="undefined"){g.max=b[e].parammax}if(typeof b[e].paramstep!=="undefined"){g.step=b[e].paramstep}if(typeof b[e].paramoptions!=="undefined"){g.options=b[e].paramoptions}}}},dcProxy:function(){var b=arguments[0];if(typeof b==="undefined"){return this.qStudioVar.dcProxy}else{this.qStudioVar.dcProxy=b}},description:function(){return"VirtualShelf component description..."},baseClassType:function(){return"multiSubQ"},questionType:function(){var b=this.qStudioVar.params.compQuestionType.value.toLowerCase();if(b.indexOf("multiple")!==-1){return"multi"}return"single"},getLibraries:function(){return["http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js","qcreator/qcore/QFactory.js"]},subQDimensionArray:function(){return[{dimensionName:"selectArray",baseType:"single",questionType:this.questionType(),isMandatory:false},{dimensionName:"qtyArray",baseType:"single",questionType:"text",isMandatory:false},{dimensionName:"timeArray",baseType:"single",questionType:"text",isMandatory:false}]},initParams:function(){return{compQuestionType:{name:"Component: Question Type",value:"Multiple Choice",description:"Component question type.",type:"combo",options:["Single Choice","Multiple Choice","Multiple Soft Cap","Multiple Hard Cap"],order:1},compCapValueQtyMax:{name:"Component: Cap Value/Qty Max",value:10,description:"Restrict the number of button selections.",type:"number",min:2,order:2},compIsMandatory:{name:"Component: Is Mandatory",value:false,description:"If set true, mandatory conditions must be met to complete exercise.",type:"bool",order:24},compRTL:{name:"Component: RTL Enable",value:false,description:"If set true, component will be setup to support right-to-left languages.",type:"bool",order:24},compPrimFontFamily:{name:"Component: Font Family",value:"Arial, Helvetica, sans-serif",description:"Primary font used throughout component.",type:"string",order:19},bckgrndImgDisplay:{name:"Background Import Image: Display",value:false,description:"If set true, a background image will display behind the shelf items.",type:"bool",order:69},bckgrndImgImport:{name:"Background Import Image",value:"",description:"Background image url.",type:"bitmapdata",order:64},bckgrndImgWidth:{name:"Background Import Image: Width",value:600,description:"Background image width, in pixels.",type:"number",min:10,order:30},bckgrndImgHeight:{name:"Background Import Image: Height",value:400,description:"Background image height in pixels.",type:"number",min:10,order:30},bckgrndImgLeft:{name:"Background Import Image: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},bckgrndImgTop:{name:"Background Import Image: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},shelfItemRowLevelHorizontalGap:{name:"Shelf Contain: Row Level Horz Spacing",value:"10",description:"Expects a string of numbers, comma-separated, to denote each rows horizontal spacing.",type:"string",order:19},shelfItemVerticalGap:{name:"Shelf Contain: Item Vertical Spacing",value:15,description:"The vertical spacing of row buttons, in pixels.",type:"number",order:9},shelfDispType:{name:"Shelf: Display Type",value:"vector",description:"Shelf background display type.",type:"combo",options:["vector","import","none"],order:1},shelfBckgrndImgImport:{name:"Shelf: Background Import Image",value:"",description:"Shelf imported background image.",type:"bitmapdata",order:64},shelfWidth:{name:"Shelf: Width",value:600,description:"Shelf background width, in pixels.",type:"number",min:200,order:30},shelfHeight:{name:"Shelf: Height",value:35,description:"Shelf background height, in pixels.",type:"number",min:5,order:30},shelfLeftRightDepthSkew:{name:"Shelf: Depth Left Right Skew",value:80,description:"Shelf left and right depth angle. A larger number creates a longer depth.",type:"number",min:10,order:30},shelfDepthHeight:{name:"Shelf: Depth Height",value:30,description:"Shelf depth height, in pixels.",type:"number",min:10,order:30},shelfLeft:{name:"Shelf: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},shelfTop:{name:"Shelf: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},shelfBckgrndColor:{name:"Shelf: Background Color",value:16760090,description:"Vector shelf background color.",type:"colour",order:36},shelfBorderStyle:{name:"Shelf: Border Style",value:"solid",description:"Vector shelf CSS border style.",type:"combo",options:["solid","dotted","dashed","none"],order:12},shelfBorderColor:{name:"Shelf: Border Color",value:10922155,description:"Vector shelf border color.",type:"colour",order:14},shelfBorderWidth:{name:"Shelf: Border Width",value:2,description:"Vector shelf border width, in pixels.",type:"number",min:0,order:13},itemViewDisplayPrice:{name:"Item View: Display Price",value:true,description:"If set true, a row price label/image will display.",type:"bool",order:69},itemViewDisplayQty:{name:"Item View: Display Qty",value:true,description:"If set true, a row quantity dropdown will display.",type:"bool",order:69},itemViewAllowZoom:{name:"Item View: Allow Zoom",value:false,description:"If set true, zoom feature will be enabled. If 'itemViewDisplayQty' is true, user must click row image to enable zoom feature. If 'itemViewDisplayQty' is false, zoom button will display.",type:"bool",order:69},itemViewShowBoxShadow:{name:"Item View: Display Box Shadow",value:false,description:"If set true, a box shadow will appear on the row image. Ideal for rectangular shaped images.",type:"bool",order:69},itemViewWidth:{name:"Item View: Width",value:125,description:"Row item width, in pixels.",type:"number",min:5,order:30},itemViewHeight:{name:"Item View: Height",value:150,description:"Row item height, in pixels.",type:"number",min:5,order:30},itemViewHorizontalGap:{name:"Item View: Stack Horizontal Spacing",value:10,description:"Row item copy horizontal spacing, in pixels.",type:"number",order:8},itemViewStackCnt:{name:"Item View: Stack Count",value:4,description:"Row item image stack count. This dictates how many image copies are placed behind one another.",type:"number",min:1,max:5,order:91},itemViewSelectAlpha:{name:"Item View: Select Opacity",value:25,description:"Row item opacity on button select.",type:"number",min:0,max:100,order:91},itemViewSelectBorderWidth:{name:"Item View: Select Border Width",value:2,description:"Item view selection border width, in pixels.",type:"number",min:0,order:14},itemViewSelectBorderStyle:{name:"Item View: Select Border Style",value:"solid",description:"Item view selection border CSS style.",type:"combo",options:["solid","dotted","dashed","none"],order:12},itemViewSelectBorderColor:{name:"Item Price: Select Border Color",value:16760090,description:"Item view selection border color.",type:"colour",order:14},itemViewShowStamp:{name:"Item Stamp: Display",value:false,description:"If set true, imported stamp will display when row item is selected.",type:"bool",order:69},itemViewStamp:{name:"Item Stamp: Import Image",value:"",description:"Imported stamp image to use on item select.",type:"bitmapdata",order:64},itemViewStampWidth:{name:"Item Stamp: Width",value:30,description:"Stamp image width, in pixels.",type:"number",min:5,order:65},itemViewStampHeight:{name:"Item Stamp: Height",value:30,description:"Stamp image height, in pixels.",type:"number",min:5,order:66},itemViewStampLeft:{name:"Item Stamp: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},itemViewStampTop:{name:"Item Stamp: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},itemViewPriceLeft:{name:"Item Price: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},itemViewPriceTop:{name:"Item Price: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},itemViewPriceFontsize:{name:"Item Price: Font Size",value:18,description:"Item price font size, in pixels.",type:"number",min:5,order:65},itemViewPriceColor:{name:"Item Price: Font Color",value:5988197,description:"Item price font color.",type:"colour",order:14},itemViewPriceBorderColor:{name:"Item Price: Border Color",value:5988197,description:"Item price border color.",type:"colour",order:14},itemViewPriceBorderWidth:{name:"Item Price: Border Width",value:2,description:"Item price border width, in pixels.",type:"number",min:0,order:14},itemViewQtyText:{name:"Item Qty: Text",value:"Qty:",description:"Row item quantity dropdown text.",type:"string",order:81},itemViewQtyLeft:{name:"Item Qty: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},itemViewQtyTop:{name:"Item Qty: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},itemViewZoomBtnText:{name:"Item Zoom Btn: Text",value:"Image Zoom",description:"Zoom button text.",type:"string",order:81},itemViewZoomBtnLeft:{name:"Item Zoom Btn: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},itemViewZoomBtnTop:{name:"Item Zoom Btn: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},itemViewZoomBtnFontsize:{name:"Item Zoom Btn: Font Size",value:12,description:"Zoom button font size, in pixels.",type:"number",min:5,order:65},itemViewZoomBtnColor:{name:"Item Zoom Btn: Font Color",value:10395294,description:"Zoom button font color.",type:"colour",order:14},itemViewZoomBtnBorderColor:{name:"Item Zoom Btn: Border Color",value:13421772,description:"Zoom button border color.",type:"colour",order:14},itemViewZoomBtnBorderWidth:{name:"Item Zoom Btn: Border Width",value:2,description:"Zoom button border width, in pixels.",type:"number",min:0,order:14},zoomViewWidth:{name:"Zoom View: Width",value:800,description:"Zoomed view width, in pixels.",type:"number",min:100,order:30},zoomViewHeaderText:{name:"Zoom View: Header Text",value:"click image to close",description:"Zoomed view header text.",type:"string",order:81},zoomViewDescrAlign:{name:"Zoom View: Descr Text Align",value:"left",description:"Zoomed view row description horizontal alignment.",type:"combo",options:["left","right","center"],order:12},zoomViewDescrFontsize:{name:"Zoom View: Descr Font Size",value:16,description:"Zoomed view row description font size, in pixels.",type:"number",min:5,order:65},zoomViewDescrColor:{name:"Zoom View: Descr Font Color",value:5988197,description:"Zoomed view row description font color",type:"colour",order:14},itemRemainText:{name:"Item Remain: Text",value:"Item Remaining:",description:"'Item Remain' text.",type:"string",order:81},itemRemainFontsize:{name:"Item Remain: Font Size",value:16,description:"'Item Remain' text font size, in pixels.",type:"number",min:5,order:65},itemRemainLeft:{name:"Item Remain: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},itemRemainTop:{name:"Item Remain: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},cartViewDisplay:{name:"Cart View: Display",value:true,description:"If set true, a 'View Cart' button will display which when clicked will display a cart breakdown.",type:"bool",order:69},cartViewDisplayPrice:{name:"Cart View: Display Price",value:true,description:"If set true, row price will display on the cart breakdown.",type:"bool",order:69},cartViewDisplayQty:{name:"Cart View: Display Qty",value:true,description:"If set true, row quantity dropdown will display on the cart breakdown.",type:"bool",order:69},cartViewTotPrecision:{name:"Cart View: Total Value Precision",value:2,description:"Cart breakdown total value currency precision.",type:"number",min:0,order:30},cartViewHeaderText:{name:"Cart View: Header Text",value:"Shopping Cart",description:"Cart breakdown header text.",type:"string",order:81},cartViewQtyText:{name:"Cart View: Quantity Text",value:"Qty:",description:"Cart breakdown quantity text.",type:"string",order:81},cartViewRemoveBtnText:{name:"Cart View: Remove Button Text",value:"Remove",description:"Cart breakdown 'Remove' button text.",type:"string",order:81},cartViewItemTotalText:{name:"Cart View: Item Total Text",value:"Item Total: ",description:"Cart breakdown 'Item Total' text.",type:"string",order:81},cartViewTotalText:{name:"Cart View: Total Text",value:"Total: ",description:"Cart breakdown 'Total' text.",type:"string",order:81},cartViewBackBtnText:{name:"Cart View: Back Button Text",value:"Continue Shopping",description:"Cart breakdown 'Back' button text.",type:"string",order:81},cartViewNextBtnText:{name:"Cart View: Next Button Text",value:"Checkout",description:"Cart breakdown 'Next' button text.",type:"string",order:81},cartViewItemContainMaxHeight:{name:"Cart View: Item Container MaxHeight",value:400,description:"Cart breakdown row item container maximum height, in pixels.",type:"number",min:100,order:30},cartViewLeft:{name:"Cart View: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},cartViewTop:{name:"Cart View: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68},cartViewLabelFontsize:{name:"Cart View: Label Font Size",value:18,description:"Cart breakdown row label font size, in pixels.",type:"number",min:5,order:65},cartViewPriceFontsize:{name:"Cart View: Price Font Size",value:18,description:"Cart breakdown row price font size, in pixels.",type:"number",min:5,order:65},cartViewLabelColor:{name:"Cart View: Label Font Color",value:5988197,description:"Cart breakdown row label font color.",type:"colour",order:14},cartViewPriceColor:{name:"Cart View: Price Font Color",value:16748800,description:"Cart breakdown row price font color.",type:"colour",order:14},cartViewBtnText:{name:"Cart Btn: Text",value:"View Cart",description:"'View Cart' button text.",type:"string",order:81},cartViewBtnLeft:{name:"Cart Btn: Left CSS Pos",value:0,description:"Left CSS offset position, in pixels.",type:"number",order:67},cartViewBtnTop:{name:"Cart Btn: Top CSS Pos",value:0,description:"Top CSS offset position, in pixels.",type:"number",order:68}}},isMandatory:function(){if(this.qStudioVar.isDC&&this.qStudioVar.dcProxy){return !!this.qStudioVar.params.compIsMandatory.value}return false},getCapType:function(){var c=this.qStudioVar.params.compQuestionType.value.toLowerCase(),b=this.qStudioVar.params.compCapValueQtyMax.value,d="none";if(c.indexOf("soft")!==-1&&(b>1)){d="soft"}if(c.indexOf("hard")!==-1&&(b>1)){d="hard"}return d},bindExitCallback:function(b){if(b&&typeof b==="function"){this.qStudioVar.respRef.exitCallback=b}},setParams:function(h,f){f=(typeof f==="boolean"&&f)?true:false;for(var j in h){if(this._configMap.hasOwnProperty(j)){var g=this._configMap[j].type,k=this._configMap[j].options,b=this._configMap[j].min,c=(!f)?h[j]:h[j].value;switch(g){case"number":if(QUtility.isNumber(c)){if(QUtility.isNumber(b)){if(c>=b){this._params[j]=c}}else{this._params[j]=c}}break;case"boolean":if(typeof c==="boolean"){this._params[j]=c}break;case"string":if(QUtility.isString(c)){if(!k){this._params[j]=jQuery.trim(c)}else{for(var d=0,e=k.length;d<e;d+=1){if(jQuery.trim(k[d]).toLowerCase()===jQuery.trim(c).toLowerCase()){this._params[j]=jQuery.trim(k[d]);break}}}}break;case"color":if(QUtility.paramToHex(c)){this._params[j]=QUtility.paramToHex(c)}break;default:break}}}},create:function(r){this.qStudioVar.respRef={timeDict:{},mandMet:false,shelfContain:undefined,itemViewArry:[],selectArray:[]};if(QUtility.isSurveyRTL()){this.qStudioVar.params.compRTL.value=true}this.qStudioVar.isCompRTL=(!(r&&r.id==="componentDemoContainer"))?this.qStudioVar.params.compRTL.value:false;r=(r&&r.nodeType===1)?r:document.body;var K=document,p=this,A=this.qStudioVar.respRef,H=this.qStudioVar.params,I=K.createElement("div"),q=K.createElement("div"),F=K.createElement("div"),E=K.createElement("div"),d=K.createElement("label"),y=undefined,h=undefined,C=K.createElement("label"),g=[],D=0,c=this.qStudioVar.rowArray.length,w=0,J=0,n=0,o=QUtility.isTouchDevice(),x=QUtility.isMSTouch(),v=(!x)?((!o)?"click.virtualshelf":"touchstart.virtualshelf touchend.virtualshelf touchmove.virtualshelf"):((!o)?"click.virtualshelf":((window.PointerEvent)?"pointerdown.virtualshelf pointerup.virtualshelf":"MSPointerDown.virtualshelf MSPointerUp.virtualshelf")),l=false,j=40,s=false,e="http://d2uw97zw06mzi0.cloudfront.net/assets/image/cart.png",G=undefined;if(this.isMandatory()){this.qStudioVar.dcProxy.hideNextButton()}q.id="VirtualShelfComponent";q.dir=(!this.qStudioVar.isCompRTL)?"ltr":"rtl";q.className="qvirtualshelf_component";q.style.position="relative";q.style.width="100%";q.style.height="100%";r=(r&&r.nodeType===1)?r:K.body;r.appendChild(q);A.compContain=q;I.className="qvs_shelf_container";I.style.position="relative";I.style.width=H.shelfWidth.value+"px";I.style.height="auto";q.appendChild(I);A.shelfContain=I;A.preloader=new QPreloader();A.preloader.initModule(q);A.preloader.getLoader().style[(!this.qStudioVar.isCompRTL)?"left":"right"]=(H.shelfWidth.value-103)*0.5+"px";A.preloader.getLoader().style.top=50+"px";for(D=0;D<c;D+=1){var b=this.qStudioVar.rowArray[D],B="",t=1,z=H.itemViewWidth.value,u=H.itemViewHeight.value;if(typeof b.price_count==="string"){b.price_count=jQuery.trim(b.price_count);var k=b.price_count.split("|");if(jQuery.trim(k[0]).length>0){B=jQuery.trim(k[0])}if(jQuery.trim(k[1])>1){t=jQuery.trim(k[1])}}if(b.price&&b.price.toString().length>0){B=b.price.toString()}if(b.item_count&&parseInt(b.item_count,10)>=1){t=parseInt(b.item_count,10)}if(typeof b.width_height==="string"){b.width_height=jQuery.trim(b.width_height);var f=b.width_height.split("|");if(jQuery.trim(f[0])>=5){z=parseInt(jQuery.trim(f[0]),10)}if(jQuery.trim(f[1])>=5){u=parseInt(jQuery.trim(f[1]),10)}}if(b.width&&parseInt(b.width,10)>=5){z=parseInt(b.width,10)}if(b.height&&parseInt(b.height,10)>=5){u=parseInt(b.height,10)}g.push({id:b.id,isRTL:this.qStudioVar.isCompRTL,primary_font_family:H.compPrimFontFamily.value,index:D,label:b.label,price:B,description:b.description,image:b.image,price_image:b.price_image,display_price:H.itemViewDisplayPrice.value,display_qty:H.itemViewDisplayQty.value,allow_zoom:H.itemViewAllowZoom.value,price_top:H.itemViewPriceTop.value,price_left:H.itemViewPriceLeft.value,price_border_color:H.itemViewPriceBorderColor.value,price_border_width:H.itemViewPriceBorderWidth.value,price_color:H.itemViewPriceColor.value,price_fontsize:H.itemViewPriceFontsize.value,qty_text:H.itemViewQtyText.value,qty_limit:H.compCapValueQtyMax.value,qty_top:H.itemViewQtyTop.value,qty_left:H.itemViewQtyLeft.value,zoom_text:H.itemViewZoomBtnText.value,zoom_left:H.itemViewZoomBtnLeft.value,zoom_top:H.itemViewZoomBtnTop.value,zoom_border_color:H.itemViewZoomBtnBorderColor.value,zoom_border_width:H.itemViewZoomBtnBorderWidth.value,zoom_color:H.itemViewZoomBtnColor.value,zoom_fontsize:H.itemViewZoomBtnFontsize.value,stamp_show:H.itemViewShowStamp.value,stamp:H.itemViewStamp.value,stamp_width:H.itemViewStampWidth.value,stamp_height:H.itemViewStampHeight.value,stamp_top:H.itemViewStampTop.value,stamp_left:H.itemViewStampLeft.value,width:z,height:u,item_count:t,item_stack_count:H.itemViewStackCnt.value,item_gap:H.itemViewHorizontalGap.value,select_alpha:H.itemViewSelectAlpha.value,box_shadow_show:H.itemViewShowBoxShadow.value,select_border_width:H.itemViewSelectBorderWidth.value,select_border_style:H.itemViewSelectBorderStyle.value,select_border_color:H.itemViewSelectBorderColor.value,load_callback:function(i){w+=1;if(w===c){if(A.itemViewArry.length!==c){G=setInterval(function(){if(A.itemViewArry.length===c){clearInterval(G);p.__createShelf();w=null}},20)}else{p.__createShelf();w=null}}},dropdown_change_callback:function(i){p.manageChange(i)},dropdown_click_callback:function(){if(p.getCapType()!=="none"){return p.__getTotalRowQty(true)}},zoombtn_callback:function(i){if(h){h.show(i)}}})}for(D=0;D<c;D+=1){var m=new QVirtualShelfItem(q,g[D]);m.item().setAttribute("rowIndex",D.toString());m.item().style.display="none";A.itemViewArry.push(m)}if(H.itemViewAllowZoom.value){h=new QVirtualShelfPopout(K.body,{isRTL:this.qStudioVar.isCompRTL,primary_font_family:H.compPrimFontFamily.value,header_text:H.zoomViewHeaderText.value,width:H.zoomViewWidth.value,descr_align:H.zoomViewDescrAlign.value,descr_fontsize:H.zoomViewDescrFontsize.value,descr_color:"#"+QUtility.paramToHex(H.zoomViewDescrColor.value)})}if(this.getCapType()!=="none"){C.dir=(!this.qStudioVar.isCompRTL)?"LTR":"RTL";C.className="qvs_item_remain_container";C.style.position="absolute";C.style[(!this.qStudioVar.isCompRTL)?"left":"right"]=H.itemRemainLeft.value+"px";C.style.top=H.itemRemainTop.value+"px";C.style.width="auto";C.style.height="auto";C.style.padding="5px";C.style.fontSize=QUtility.convertPxtoEM(H.itemRemainFontsize.value)+"em";C.style.fontFamily=H.compPrimFontFamily.value;C.style.borderBottom="2px solid #CCC";C.style.zIndex=3998;$(C).text(H.itemRemainText.value+" "+H.compCapValueQtyMax.value);q.insertBefore(C,q.firstChild);A.itemRemain=C}if(H.cartViewDisplay.value){y=new QVirtualShelfCart(q,{isRTL:p.qStudioVar.isCompRTL,cap_value:(p.getCapType()==="hard")?H.compCapValueQtyMax.value:null,primary_font_family:H.compPrimFontFamily.value,total_precision:H.cartViewTotPrecision.value,header_text:H.cartViewHeaderText.value,qty_text:H.cartViewQtyText.value,removebtn_text:H.cartViewRemoveBtnText.value,total_text:H.cartViewTotalText.value,item_text:H.cartViewItemTotalText.value,backbtn_text:H.cartViewBackBtnText.value,nextbtn_text:H.cartViewNextBtnText.value,display_price:H.cartViewDisplayPrice.value,display_qty:H.cartViewDisplayQty.value,qty_limit:H.compCapValueQtyMax.value,width:H.shelfWidth.value,height:H.cartViewItemContainMaxHeight.value,top:H.cartViewTop.value,left:H.cartViewLeft.value,padding:10,header_fontsize:H.cartViewLabelFontsize.value,header_fontcolor:"#"+QUtility.paramToHex(H.cartViewLabelColor.value),label_fontsize:H.cartViewLabelFontsize.value,label_fontcolor:"#"+QUtility.paramToHex(H.cartViewLabelColor.value),price_fontsize:H.cartViewPriceFontsize.value,price_fontcolor:"#"+QUtility.paramToHex(H.cartViewPriceColor.value),total_fontsize:H.cartViewLabelFontsize.value,total_fontcolor:"#"+QUtility.paramToHex(H.cartViewLabelColor.value),itemViewArry:A.itemViewArry,back_callback:function(){F.style.display="block";I.style.display="block";C.style.display="block"},next_callback:function(){if(p.qStudioVar.isDC&&p.qStudioVar.dcProxy){p.qStudioVar.dcProxy.next()}else{if(A.exitCallback){A.exitCallback()}}},remove_callback:function(i){(!H.itemViewDisplayQty.value)?p.manageClick(i):p.manageChange(i)},dropdown_change_callback:function(L,i){p.sendQty(L,i)},dropdown_click_callback:function(){if(p.getCapType()!=="none"){return p.__getTotalRowQty(true)}}});F.appendChild(E);F.appendChild(d);q.insertBefore(F,q.firstChild);d.dir=(!this.qStudioVar.isCompRTL)?"LTR":"RTL";d.style.cssText+=";".concat("-webkit-box-sizing: border-box");d.style.cssText+=";".concat("-moz-box-sizing: border-box");d.style.cssText+=";".concat("box-sizing: border-box");d.style.position="relative";d.style.display="inline-block";d.style.verticalAlign="top";d.style.visibility="hidden";d.style.fontSize=QUtility.convertPxtoEM(15)+"em";d.style.fontFamily=H.compPrimFontFamily.value;d.style.width="auto";d.style.height=j+"px";d.style.padding=10+"px";d.style.whiteSpace="nowrap";d.style.textAlign="center";d.style.cursor="inherit";$(d).html(H.cartViewBtnText.value);K.body.appendChild(d);if($(d).width()>0){s=true;J=$(d).outerWidth();n=$(d).outerHeight();d.style.width=J+"px";d.style.height=n+"px";F.appendChild(d);d.style.visibility=""}F.className="qvs_cart_button";F.style.position="relative";F.style.marginBottom="20px";F.style[(!this.qStudioVar.isCompRTL)?"left":"right"]=(H.shelfWidth.value-(J+44)+H.cartViewBtnLeft.value)+"px";F.style.top=H.cartViewBtnTop.value+"px";F.style.width=(J+40)+"px";F.style.height=j+"px";F.style.border="2px solid #CCC";F.style.cursor="default";F.style.zIndex=3999;F.style.backgroundColor="#FFFFFF";$(F).css({opacity:0.5});A.cartBtnContain=F;$(E).css({"box-sizing":"border-box",padding:"2px",position:"relative",display:"inline-block","vertical-align":"top","background-color":"#e0e0d1",width:40+"px",height:j+"px","border-right":(s)?"2px solid #CCC":"","background-repeat":"no-repeat","background-size":40+"px "+j+"px","background-position":"center","background-image":(QUtility.ieVersion()<9)?"url() url("+e+")":"url("+e+")",filter:"inherit progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+e+", sizingMethod='scale')"});$(F).on(v,function(i){if(!A.selectArray.length){return}if(i.type!=="touchmove"){if(i.type!=="touchstart"&&i.type!=="pointerdown"&&i.type!=="MSPointerDown"){if(!l){F.style.display="none";I.style.display="none";C.style.display="none";y.show()}}else{l=false}}else{l=true}})}$(I).on(v,((!H.itemViewDisplayQty.value)?".qvs_item_view":"qvs_item_product_container"),function(i){if(i.type!=="touchmove"){if(i.type!=="touchstart"&&i.type!=="pointerdown"&&i.type!=="MSPointerDown"){if(!l){var L=(!H.itemViewDisplayQty.value)?i.currentTarget:i.currentTarge.parentNode;p.manageClick(A.itemViewArry[parseInt(L.getAttribute("rowIndex"),10)])}}else{l=false}}else{l=true}})},__createShelf:function(){var s=this.qStudioVar.respRef,A=this.qStudioVar.params,w=0,d=s.itemViewArry.length,b=8,p=b,r=0,x=0,y=0,g=0,t=0,v=0,z=0,o=10,q=A.shelfItemRowLevelHorizontalGap.value.split(","),C=QUtility.isNumber(q[q.length-1])?parseInt(jQuery.trim(q[q.length-1]),10):10,m=QUtility.isNumber(q[0])?parseInt(jQuery.trim(q[0]),10):C,h=QUtility.getQStudioSurveyScale();s.preloader.destroy();delete s.preloader;s.shelfContain.appendChild(this.__createShelfRow());for(w=0;w<d;w+=1){var k=s.itemViewArry[w];g=$(k.item()).outerWidth();t=$(k.item()).outerHeight();if((v+g)>=A.shelfWidth.value&&p!==b){p=b;r+=z+A.shelfItemVerticalGap.value;x=0;y+=1;s.shelfContain.appendChild(this.__createShelfRow());s.shelfContain.children[y].style.top=r+"px";m=QUtility.isNumber(q[y])?parseInt(jQuery.trim(q[y]),10):C}k.item().style.position="absolute";k.item().style.left=p+"px";k.item().style.bottom="0px";k.item().style.display="";p+=(g+m);x=Math.max(x,t);v=p+m;z=(x+$(s.shelfContain.children[y].children[1]).outerHeight());s.shelfContain.children[y].firstChild.appendChild(k.item());s.shelfContain.children[y].firstChild.style.width=v+"px";s.shelfContain.children[y].firstChild.style.height=x+"px";s.shelfContain.children[y].style.width=A.shelfWidth.value+"px";s.shelfContain.children[y].style.height=z+"px";s.shelfContain.style.height=(r+z)+"px";s.shelfContain.children[y].firstChild.style.left=((A.shelfWidth.value-p-b)*0.5)+"px"}for(w=0;w<d;w+=1){var k=s.itemViewArry[w],f=k.productContain();for(var l=f.firstChild;l;l=l.nextSibling){var B=($(l).offset().left-$(s.shelfContain).offset().left)*(1/h.a)/this.qStudioVar.params.shelfWidth.value,e=0;for(var u=l.children.length-1;u>=0;u-=1){if(u===l.children.length-1){l.children[u].style.zIndex=w+101;continue}var n=parseFloat(B*(o-(-o))+(-o))*-1;l.children[u].style.left=(e+n)+"px";e+=n}}}s.selectTime=0;s.selectTimer=setInterval(function(){s.selectTime+=20},20);if(A.bckgrndImgDisplay.value){var c=document.createElement("div");c.className="qvirtualshelf_shelf_background_image";$(c).css({position:"absolute",top:A.bckgrndImgTop.value+"px",left:A.bckgrndImgLeft.value+"px",width:A.bckgrndImgWidth.value+"px",height:A.bckgrndImgHeight.value+"px","background-repeat":"no-repeat","background-size":A.bckgrndImgWidth.value+"px "+A.bckgrndImgHeight.value+"px","background-position":"center","background-image":(QUtility.ieVersion()<9)?"url("+A.bckgrndImgImport.value+")":"url("+A.bckgrndImgImport.value+")",filter:"inherit progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+A.bckgrndImgImport.value+",sizingMethod='scale')"});s.shelfContain.insertBefore(c,s.shelfContain.firstChild);s.shelfContain.style.width=Math.max($(s.shelfContain).width(),A.bckgrndImgWidth.value+A.bckgrndImgLeft.value)+"px";s.shelfContain.style.height=Math.max($(s.shelfContain).height(),A.bckgrndImgHeight.value+A.bckgrndImgTop.value)+"px"}},__createShelfRow:function(){var h=this.qStudioVar.params,c=h.shelfDispType.value.toLowerCase(),f=document,g=f.createElement("div"),e=f.createElement("div"),b=f.createElement("div");g.dir="LTR";g.className="qvirtualshelf_row_container";g.style.position="absolute";e.className="qvirtualshelf_row_item_container";e.style.zIndex=100;e.style.position="relative";e.style.bottom=0;g.appendChild(e);b.className="qvirtualshelf_row_shelf_image";b.style.zIndex=10;b.style.position="relative";b.style.left=h.shelfLeft.value+"px";b.style.top=h.shelfTop.value+"px";b.style.filter="inherit";b.style.width=h.shelfWidth.value+"px";b.style.height=h.shelfHeight.value+"px";b.style.border=h.shelfBorderWidth.value+"px "+h.shelfBorderStyle.value+" #"+QUtility.paramToHex(h.shelfBorderColor.value);b.style.cssText+=";".concat("-webkit-box-sizing: border-box");b.style.cssText+=";".concat("-moz-box-sizing: border-box");b.style.cssText+=";".concat("box-sizing: border-box");g.appendChild(b);if(c==="none"){b.style.backgroundColor="transparent";b.style.borderColor="transparent"}else{if(c==="import"){$(b).css({"background-repeat":"no-repeat","background-size":h.shelfWidth.value+"px "+h.shelfHeight.value+"px","background-position":"center","background-image":(QUtility.ieVersion()<9)?"url() url("+h.shelfBckgrndImgImport.value+")":"url("+h.shelfBckgrndImgImport.value+")",filter:"inherit progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+h.shelfBckgrndImgImport.value+", sizingMethod='scale')"})}else{b.style.backgroundColor="#"+QUtility.paramToHex(h.shelfBckgrndColor.value);var d=f.createElement("div");d.style.position="relative";d.style.width=h.shelfWidth.value+"px";d.style.height=0+"px";d.style.marginLeft=-h.shelfBorderWidth.value+"px";d.style.marginTop=(-h.shelfDepthHeight.value-h.shelfBorderWidth.value)+"px";d.style.borderLeft=h.shelfLeftRightDepthSkew.value+"px solid transparent";d.style.borderRight=h.shelfLeftRightDepthSkew.value+"px solid transparent";d.style.borderBottom=h.shelfDepthHeight.value+"px solid #CCC";d.style.cssText+=";".concat("-webkit-box-sizing: border-box");d.style.cssText+=";".concat("-moz-box-sizing: border-box");d.style.cssText+=";".concat("box-sizing: border-box");b.appendChild(d)}}return g},__getTotalRowQty:function(g){var h=this.qStudioVar.params,f=this.qStudioVar.respRef.selectArray,d=0,c=f.length,b=0;for(d;d<c;d+=1){var e=f[d];b+=e.qtyDropdown().selectedIndex}return(typeof g==="boolean"&&g)?(h.compCapValueQtyMax.value-b):b},manageClick:function(j){var h=this,c=this.questionType(),m=this.qStudioVar.respRef,e=this.qStudioVar.params,n=this.__getTotalRowQty(true),k=parseInt(j.item().getAttribute("rowIndex"),10),b=jQuery.inArray(j,m.selectArray),f=j.qtyDropdown().selectedIndex;var d=function(){h.sendResponse(k,j.isAnswered());clearInterval(m.selectTimer);h.sendTime(k,j.isAnswered()?m.selectTime:"");m.selectTime=0;m.selectTimer=setInterval(function(){m.selectTime+=20},20)};if(j.isAnswered()){n+=f}var l=(((e.compCapValueQtyMax.value>1)&&(this.getCapType()!=="none"))?(n>0):true);if(f===0){return}if(c==="multi"){j.isAnswered(!j.isAnswered());if(j.isAnswered()){if(!l){j.isAnswered(false);return}if(b===-1){m.selectArray.push(j);d()}}else{if(b!==-1){m.selectArray.splice(b,1);d()}}this.sendQty(k,j.isAnswered()?f:"")}else{var g=m.selectArray[0],i=(g)?(parseInt(g.item().getAttribute("rowIndex"),10)):-1;j.isAnswered(!j.isAnswered());if(g!==j){if(g){g.isAnswered(false);m.selectArray=[];this.sendResponse(i,false,true);this.sendTime(i,"");this.sendQty(i,"",true)}m.selectArray.push(j);this.sendResponse(k,true);this.sendQty(k,f);clearInterval(m.selectTimer);this.sendTime(k,m.selectTime);m.selectTime=0;m.selectTimer=setInterval(function(){m.selectTime+=20},20)}else{g.isAnswered((!e.itemViewDisplayQty.value)?false:(g.qtyDropdown().selectedIndex>0));if(!g.isAnswered()){m.selectArray=[];this.sendResponse(i,false,true);clearInterval(m.selectTimer);this.sendTime(i,"");m.selectTime=0;m.selectTimer=setInterval(function(){m.selectTime+=20},20)}this.sendQty(i,(g.isAnswered())?g.qtyDropdown().selectedIndex:"")}}},manageChange:function(j){var h=this,c=this.questionType(),m=this.qStudioVar.respRef,e=this.qStudioVar.params,n=this.__getTotalRowQty(true),k=parseInt(j.item().getAttribute("rowIndex"),10),b=jQuery.inArray(j,m.selectArray),f=j.qtyDropdown().selectedIndex;var d=function(){h.sendResponse(k,j.isAnswered());clearInterval(m.selectTimer);h.sendTime(k,j.isAnswered()?m.selectTime:"");m.selectTime=0;m.selectTimer=setInterval(function(){m.selectTime+=20},20)};if(j.isAnswered()){n+=f}var l=(((e.compCapValueQtyMax.value>1)&&(this.getCapType()!=="none"))?(n>0):true);if(c==="multi"){j.isAnswered(f>0);if(j.isAnswered()){if(!l){j.isAnswered(false);return}if(b===-1){m.selectArray.push(j);d()}}else{if(b!==-1){m.selectArray.splice(b,1);d()}}this.sendQty(k,j.isAnswered()?f:"")}else{var g=m.selectArray[0],i=(g)?(parseInt(g.item().getAttribute("rowIndex"),10)):-1;j.isAnswered(!j.isAnswered());if(g!==j){if(g){g.isAnswered(false);m.selectArray=[];this.sendResponse(i,false,true);this.sendTime(i,"");this.sendQty(i,"",true)}m.selectArray.push(j);this.sendResponse(k,true);this.sendQty(k,f);clearInterval(m.selectTimer);this.sendTime(k,m.selectTime);m.selectTime=0;m.selectTimer=setInterval(function(){m.selectTime+=20},20)}else{g.isAnswered((!e.itemViewDisplayQty.value)?false:(g.qtyDropdown().selectedIndex>0));if(!g.isAnswered()){m.selectArray=[];this.sendResponse(i,false,true);clearInterval(m.selectTimer);this.sendTime(i,"");m.selectTime=0;m.selectTimer=setInterval(function(){m.selectTime+=20},20)}this.sendQty(i,(g.isAnswered())?g.qtyDropdown().selectedIndex:"")}}},mandCondMet:function(){var f=this.qStudioVar.params,c=this.getCapType(),d=this.__getTotalRowQty(),e=(f.compCapValueQtyMax.value>1)?f.compCapValueQtyMax.value:-1,b=(d>0&&d===e),g=(d>0&&d<=e);if(c==="hard"){return b}else{if(c==="soft"){return g}}return(d>0)},sendResponse:function(g,c,b){var e=this.qStudioVar.respRef,f=this.qStudioVar.dcProxy,d=this.mandCondMet();console.log("Response: "+g+" | "+c+" | "+d);if(e.cartBtnContain){e.cartBtnContain.style.cursor=(e.selectArray.length>0)?"pointer":"default";$(e.cartBtnContain).css({opacity:(e.selectArray.length>0)?1:0.5})}if(this.qStudioVar.isDC&&typeof f!=="undefined"){f.sendResponse({eventType:(c)?"questionAnswered":"questionUnAnswered",responseType:this.questionType(),rowID:this.qStudioVar.rowArray[g].rowVO.id,answerValue:c,dimensionName:"selectArray"});if(!b&&this.isMandatory()&&(e.mandMet!==d)){e.mandMet=d;f[(e.mandMet)?"showNextButton":"hideNextButton"]()}}else{if(!b&&e.mandMet!==d){e.mandMet=d;if(e.mandMet&&e.exitCallback){e.exitCallback()}}}},sendQty:function(g,c,b){var e=this.qStudioVar.respRef,f=this.qStudioVar.dcProxy,d=this.mandCondMet();console.log("Qty: "+g+" | "+c+" | "+d);if(e.itemRemain){$(e.itemRemain).html(this.qStudioVar.params.itemRemainText.value+" "+this.__getTotalRowQty(true))}if(this.qStudioVar.isDC&&typeof f!=="undefined"){f.sendResponse({eventType:"questionAnswered",responseType:"text",rowID:this.qStudioVar.rowArray[g].rowVO.id,answerValue:c.toString(),dimensionName:"qtyArray"});if(!b&&this.isMandatory()&&(e.mandMet!==d)){e.mandMet=d;f[(e.mandMet)?"showNextButton":"hideNextButton"]()}}else{if(!b&&e.mandMet!==d){e.mandMet=d;if(e.mandMet&&e.exitCallback){e.exitCallback()}}}},sendTime:function(c,b){console.log("Time: "+c+" | "+b);this.qStudioVar.respRef.timeDict[c]=b;if(this.qStudioVar.isDC&&typeof this.qStudioVar.dcProxy!=="undefined"){this.qStudioVar.dcProxy.sendResponse({eventType:"questionAnswered",responseType:"text",rowID:this.qStudioVar.rowArray[c].rowVO.id,answerValue:b.toString(),dimensionName:"timeArray"})}},getDimenResp:function(){if(!this.qStudioVar.isDC){return}var f=this.qStudioVar.respRef,b=[],d={Response:{Value:b}},c=0,e=f.selectArray.length;for(c=0;c<e;c+=1){b.push({id:f.selectArray[c].item().id,qty:f.selectArray[c].qtyDropdown().selectedIndex,time_ms:f.timeDict[f.selectArray[c].config().index]})}return d}};return a})();function QVirtualShelfItem(m,e){var j=this,l=document,n=(m&&m.nodeType===1)?m:l.body,o=l.createElement("div"),k=l.createElement("div"),i=l.createElement("label"),g=l.createElement("img"),d=l.createElement("div"),f=l.createElement("label"),b=l.createElement("select"),c=l.createElement("label"),a=l.createElement("div"),h=false;o.dir="LTR";o.className="qvs_item_view";o.style.position="absolute";o.style.filter="inherit";o.style.cursor="pointer";o.style.cssText+=";".concat("-webkit-tap-highlight-color: rgba(0,0,0,0);");o.style.cssText+=";".concat("-webkit-touch-callout: none;");o.style.cssText+=";".concat("-ms-touch-action: none;");o.style.cssText+=";".concat("-webkit-user-select: none;");o.style.cssText+=";".concat("-khtml-user-select: none;");o.style.cssText+=";".concat("-moz-user-select: none;");o.style.cssText+=";".concat("-ms-user-select: none;");o.style.cssText+=";".concat("-user-select: none;");k.className="qvs_item_product_container";k.style.position="relative";k.style.filter="inherit";i.className="qvs_item_price";i.style.cssText+=";".concat("-webkit-box-sizing: border-box");i.style.cssText+=";".concat("-moz-box-sizing: border-box");i.style.cssText+=";".concat("box-sizing: border-box");i.style.position="absolute";i.style.cursor="default";i.style.filter="inherit";i.style.whiteSpace="nowrap";g.className="qvs_item_price_image";g.style.position="absolute";g.style.cursor="default";g.style.filter="inherit";d.className="qvs_item_quantity_container";d.style.position="absolute";d.style.cursor="default";d.style.filter="inherit";f.className="qvs_item_quantity_label";f.style.position="absolute";f.style.filter="inherit";f.style.whiteSpace="nowrap";b.className="qvs_item_quantity_dropdown";b.style.cssText+=";".concat("-webkit-box-sizing: border-box");b.style.cssText+=";".concat("-moz-box-sizing: border-box");b.style.cssText+=";".concat("box-sizing: border-box");b.style.position="absolute";b.style.padding=0;b.style.width="auto";b.style.top=0;b.style.left=0;b.style.filter="inherit";c.className="qvs_item_zoom_button";c.style.position="absolute";c.style.display="block";c.style.filter="inherit";c.style.cursor="pointer";c.style.left="50%";a.className="qvs_item_stamp";a.style.position="absolute";a.style.filter="inherit";d.appendChild(f);d.appendChild(b);o.appendChild(k);o.appendChild(i);o.appendChild(d);o.appendChild(c);o.appendChild(a);n.appendChild(o);this._events={change:"change.qvs_item",click:(!QUtility.isMSTouch())?((!QUtility.isTouchDevice())?"click.qvs_item mousedown.qvs_item mouseup.qvs_item":"touchstart.qvs_item touchend.qvs_item touchmove.qvs_item"):((!QUtility.isTouchDevice())?"click.qvs_item mousedown.qvs_item mouseup.qvs_item":((window.PointerEvent)?"pointerdown.qvs_item pointerup.qvs_item":"MSPointerDown.qvs_item MSPointerUp.qvs_item"))};this._widget=o;this._params={};this._cache={};this._cache._isAnswered=false;this._cache.nodes={productContain:k,price:i,priceImg:g,qtyLabel:f,qtyDropdown:b,qtyContain:d,zoomBtn:c,stamp:a};this.config(e);$(b).on(this._events.click,function(r){r.stopImmediatePropagation();if(j._params.dropdown_click_callback){if(r.type==="click"||r.type==="mouseup"){return}var s=j._params.dropdown_click_callback();if(QUtility.isNumber(s)){if(j.isAnswered()){s+=j.qtyDropdown().selectedIndex}for(var q=0;q<this.children.length;q+=1){var p=this.children[q];p.disabled=((s>0&&q>s)||s===0)}}}});$(b).on(this._events.change,function(p){if(j._params.dropdown_change_callback){j._params.dropdown_change_callback(j)}});if(this._params.allow_zoom){$((!this._params.display_qty)?c:k).on(this._events.click,function(p){p.stopPropagation();if(p.type!=="touchmove"){if(p.type!=="mousedown"&&p.type!=="mouseup"&&p.type!=="touchstart"&&p.type!=="pointerdown"&&p.type!=="MSPointerDown"){if(h){return}if(j._params.zoombtn_callback){j._params.zoombtn_callback(j)}}else{h=false}}else{h=true}})}}QVirtualShelfItem.prototype.initConfigMap=function(){if(this._configMap===undefined){this._configMap={isRTL:{value:false,type:"boolean"},display_price:{value:true,type:"boolean"},display_qty:{value:true,type:"boolean"},allow_zoom:{value:true,type:"boolean"},stamp_show:{value:false,type:"boolean"},box_shadow_show:{value:false,type:"boolean"},index:{value:-1,type:"number",min:0},width:{value:85,type:"number",min:1},height:{value:100,type:"number",min:1},item_count:{value:1,type:"number",min:1},item_stack_count:{value:4,type:"number",min:1},item_gap:{value:10,type:"number",min:1},item_width_offset:{value:3,type:"number",min:0},item_height_offset:{value:2,type:"number",min:0},animate_duration:{value:200,type:"number",min:0},select_alpha:{value:100,type:"number",min:0},select_border_width:{value:2,type:"number",min:0},select_border_style:{value:"solid",type:"string",options:["none","solid","dotted","dashed"]},select_border_color:{value:16760090,type:"color"},primary_font_family:{value:"",type:"string"},id:{value:"",type:"string"},label:{value:"",type:"string"},price:{value:"",type:"string"},description:{value:"",type:"string"},image:{value:"",type:"string"},price_image:{value:"",type:"string"},price_image_width:{value:50,type:"number",min:1},price_image_height:{value:50,type:"number",min:1},price_top:{value:0,type:"number"},price_left:{value:0,type:"number"},price_padding:{value:2,type:"number",min:0},price_fontsize:{value:18,type:"number",min:5},price_border_width:{value:1,type:"number",min:0},price_border_style:{value:"solid",type:"string",options:["none","solid","dotted","dashed"]},price_bckgrnd_color:{value:16777215,type:"color"},price_border_color:{value:13421772,type:"color"},price_color:{value:0,type:"color"},qty_limit:{value:10,type:"number",min:1},qty_top:{value:0,type:"number"},qty_left:{value:0,type:"number"},qty_text:{value:"Qty:",type:"string"},zoom_top:{value:0,type:"number"},zoom_left:{value:0,type:"number"},zoom_fontsize:{value:15,type:"number",min:5},zoom_border_width:{value:1,type:"number",min:0},zoom_text:{value:"click to zoom",type:"string"},zoom_border_style:{value:"solid",type:"string",options:["none","solid","dotted","dashed"]},zoom_border_color:{value:13421772,type:"color"},zoom_color:{value:0,type:"color"},stamp_width:{value:30,type:"number",min:1},stamp_height:{value:30,type:"number",min:1},stamp_top:{value:0,type:"number"},stamp_left:{value:0,type:"number"},stamp:{value:"",type:"string"}}}};QVirtualShelfItem.prototype.config=function(a){if(!this._widget){return null}if(typeof a!=="object"){return this._params}else{if(this._configMap===undefined){this.initConfigMap();VirtualShelf.prototype.setParams.apply(this,[this._configMap,true])}VirtualShelf.prototype.setParams.apply(this,[a]);this._params.load_callback=(a.load_callback&&typeof a.load_callback==="function")?a.load_callback:(this._params.load_callback||undefined);this._params.dropdown_change_callback=(a.dropdown_change_callback&&typeof a.dropdown_change_callback==="function")?a.dropdown_change_callback:(this._params.dropdown_change_callback||undefined);this._params.dropdown_click_callback=(a.dropdown_click_callback&&typeof a.dropdown_click_callback==="function")?a.dropdown_click_callback:(this._params.dropdown_click_callback||undefined);this._params.zoombtn_callback=(a.zoombtn_callback&&typeof a.zoombtn_callback==="function")?a.zoombtn_callback:(this._params.zoombtn_callback||undefined);if(this._params.price_border_style==="none"){this._params.price_border_width=0}if(this._params.select_border_style==="none"){this._params.select_border_width=0}this.update();a=null;return this}};QVirtualShelfItem.prototype.update=function(){if(!this._widget){return false}var j=this,n=document,e=this._params,o=this._widget,d=this._cache.nodes,b=e.image.split(","),a=0,p=0,c=false,i=0,m=0,l=0,f=0,h=0,g=0;var k=function(){if(e.display_qty&&e.qty_text!==""){d.qtyLabel.style.fontFamily=e.primary_font_family;d.qtyLabel.style.fontSize=QUtility.convertPxtoEM(14)+"em";$(d.qtyLabel).html(e.qty_text);d.qtyLabel.style.visibility="hidden";n.body.appendChild(d.qtyLabel);i=$(d.qtyLabel).outerWidth();m=$(d.qtyLabel).outerHeight();d.qtyContain.insertBefore(d.qtyLabel,d.qtyContain.firstChild);d.qtyLabel.style.visibility=""}else{if(d.qtyLabel.parentNode&&d.qtyLabel.parentNode.nodeType===1){d.qtyLabel.parentNode.removeChild(d.qtyLabel)}}d.qtyDropdown.style.fontFamily=e.primary_font_family;d.qtyDropdown.style.fontSize=QUtility.convertPxtoEM(14)+"em";d.qtyDropdown.style[(!e.isRTL)?"marginLeft":"marginRight"]=(i+((i>0)?5:0))+"px";while(d.qtyDropdown.firstChild){d.qtyDropdown.removeChild(d.qtyDropdown.firstChild)}for(var s=0;s<=e.qty_limit;s+=1){var r=n.createElement("option");r.id="btn_id_"+s;r.className="qvs_item_dropdown_option";r.value=s;r.style.display="block";$(r).html(r.value);d.qtyDropdown.appendChild(r)}j.qtyDropdown(true);if(e.display_qty){d.qtyContain.style.visibility="hidden";n.body.appendChild(d.qtyContain);l=$(d.qtyDropdown).outerHeight();f=$(d.qtyDropdown).outerWidth(true);o.appendChild(d.qtyContain);d.qtyContain.style.visibility="";d.qtyContain.dir=(!e.isRTL)?"LTR":"RTL";d.qtyContain.style.width=f+"px";d.qtyContain.style.height=Math.max(m,l)+"px";if(a>0){a+=5}d.qtyContain.style[(!e.isRTL)?"marginLeft":"marginRight"]=(a+e.qty_left)+"px"}else{if(d.qtyContain.parentNode&&d.qtyContain.parentNode.nodeType===1){d.qtyContain.parentNode.removeChild(d.qtyContain)}}if(!e.display_qty&&e.allow_zoom){d.zoomBtn.style.fontFamily=e.primary_font_family;d.zoomBtn.style.visibility="hidden";d.zoomBtn.style.padding="2px";d.zoomBtn.style.whiteSpace="nowrap";d.zoomBtn.style.color="#"+e.zoom_color;d.zoomBtn.style.fontSize=QUtility.convertPxtoEM(e.zoom_fontsize)+"em";d.zoomBtn.style.backgroundColor="#FFF";d.zoomBtn.style.border=e.zoom_border_width+"px "+e.zoom_border_style+" #"+e.zoom_border_color;$(d.zoomBtn).html(e.zoom_text||"+");n.body.appendChild(d.zoomBtn);h=$(d.zoomBtn).outerWidth();d.zoomBtn.style.marginLeft=(-h*0.5+e.zoom_left)+"px";o.appendChild(d.zoomBtn);d.zoomBtn.style.visibility=""}else{if(d.zoomBtn.parentNode&&d.zoomBtn.parentNode.nodeType===1){d.zoomBtn.parentNode.removeChild(d.zoomBtn)}}if(e.stamp_show&&e.stamp!==""){o.appendChild(d.stamp);$(d.stamp).css({display:"none","z-index":1000,width:e.stamp_width+"px",height:e.stamp_height+"px","background-repeat":"no-repeat","background-size":e.stamp_width+"px "+e.stamp_height+"px","background-position":"center","background-image":(QUtility.ieVersion()<9)?"url() url("+e.stamp+")":"url("+e.stamp+")",filter:"inherit progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+e.stamp+", sizingMethod='scale')"})}else{if(d.stamp.parentNode&&d.stamp.parentNode.nodeType===1){d.stamp.parentNode.removeChild(d.stamp)}}while(d.productContain.firstChild){d.productContain.removeChild(d.productContain.firstChild)}var q=n.createElement("div"),t=n.createElement("img");q.className="qvs_item_stack";q.style.position="absolute";q.style.filter="inherit";d.productContain.appendChild(q);t.className="qvs_item_image";t.style.position="absolute";t.style.filter="inherit";t.style.width="auto";t.style.height="auto";t.style.maxWidth=e.width+"px";t.style.maxHeight=e.height+"px";t.style.visibility="hidden";t.src=b[0];if(e.box_shadow_show){t.style.MozBoxShadow=t.style.webkitBoxShadow=t.style.boxShadow="3px 0px 5px #888"}$(t).on("load.qvirtualshop",function(){var w=0,u=0,v=0,B=0,y=0;$(this).off("load.qvirtualshop");n.body.appendChild(this);w=$(this).width();u=$(this).height();v=w;B=u;this.style.width=w+"px";this.style.height=u+"px";q.appendChild(this);q.style.width=w+"px";q.style.height=u+"px";this.style.visibility="";for(var z=0;z<e.item_stack_count-1;z+=1){v-=e.item_width_offset;B-=e.item_height_offset;var A=t.cloneNode(true);A.style.top=-((z+1)*2)+"px";A.style.width=v+"px";A.style.height=B+"px";q.insertBefore(A,q.firstChild)}for(z=1;z<e.item_count;z+=1){var x=q.cloneNode(true);x.style.left=((w+e.item_gap)*z)+"px";d.productContain.appendChild(x)}y=((w+e.item_gap)*z)-e.item_gap;d.productContain.style.width=y+"px";d.productContain.style.height=u+"px";g=Math.max(y,h,(a+f));d.productContain.style.left=(g-y)*0.5+"px";d.stamp.style.top=((u-e.stamp_height)*0.5+e.stamp_top)+"px";d.stamp.style[(!e.isRTL)?"left":"right"]=((g-e.stamp_width)*0.5+e.stamp_left)+"px";if(!c){d.price.style[(!e.isRTL)?"left":"right"]=(g-a-((e.display_qty)?f:0))*0.5+"px";d.price.style.top=(u+e.price_top)+"px"}else{d.priceImg.style[(!e.isRTL)?"left":"right"]=(g-a-((e.display_qty)?f:0))*0.5+"px";d.priceImg.style.top=(u+e.price_top)+"px"}d.qtyContain.style.left=(g-f-((e.display_price)?a:0))*0.5+"px";d.qtyContain.style.top=(u+e.qty_top)+"px";d.zoomBtn.style.top=(u+p+e.zoom_top+2)+"px";o.style.width=g+"px";o.style.height=u+"px";if(e.load_callback){e.load_callback(j)}}).attr("src",b[0])};o.id=e.id;if(e.display_price&&e.price!==""){d.price.dir=(!e.isRTL)?"LTR":"RTL";d.price.style.fontFamily=e.primary_font_family;d.price.style.visibility="hidden";d.price.style.cursor=(!e.display_qty)?"inherit":"default";d.price.style.color="#"+e.price_color;d.price.style.padding=e.price_padding+"px";d.price.style.whiteSpace="nowrap";d.price.style.fontSize=QUtility.convertPxtoEM(e.price_fontsize)+"em";d.price.style.backgroundColor="#"+e.price_bckgrnd_color;d.price.style.border=e.price_border_width+"px "+e.price_border_style+" #"+e.price_border_color;$(d.price).html(e.price);n.body.appendChild(d.price);a=$(d.price).outerWidth();p=$(d.price).outerHeight();d.price.style[(!e.isRTL)?"left":"right"]=e.price_left+"px";$(d.price).insertAfter(o.firstChild)}else{if(d.price.parentNode&&d.price.parentNode.nodeType===1){d.price.parentNode.removeChild(d.price)}}if(e.display_price&&e.price_image.length>0){d.priceImg.style.visibility="hidden";d.priceImg.style.cursor=(!e.display_qty)?"inherit":"default";d.priceImg.style.width="auto";d.priceImg.style.height="auto";d.priceImg.style.maxWidth=e.price_image_width+"px";d.priceImg.style.maxHeight=e.price_image_height+"px";d.priceImg.src=e.price_image;$(d.priceImg).on("load.qvs_price_image",function(r){var q=0;$(this).off("load.qvs_price_image");n.body.appendChild(d.priceImg);q=$(d.priceImg).outerWidth();$(d.priceImg).insertAfter(o.firstChild);d.priceImg.style.visibility="";if(d.price.parentNode&&d.price.parentNode.nodeType===1){d.price.parentNode.removeChild(d.price)}c=true;a=q;k()}).attr("src",e.price_image);$(d.priceImg).on("error.qvs_price_image",function(q){$(this).off("error.qvs_price_image");d.price.style.visibility="";if(d.priceImg.parentNode&&d.priceImg.parentNode.nodeType===1){d.priceImg.parentNode.removeChild(d.priceImg)}k()}).attr("src",e.price_image)}else{d.price.style.visibility="";if(d.priceImg.parentNode&&d.priceImg.parentNode.nodeType===1){d.priceImg.parentNode.removeChild(d.priceImg)}k()}};QVirtualShelfItem.prototype.item=function(){if(!this._widget){return null}return this._widget};QVirtualShelfItem.prototype.qtyDropdown=function(a){if(!this._widget){return null}if(typeof a==="boolean"&&a){this._cache.nodes.qtyDropdown.selectedIndex=(this._params.display_qty)?0:1}else{return this._cache.nodes.qtyDropdown}};QVirtualShelfItem.prototype.productContain=function(){if(!this._widget){return null}return this._cache.nodes.productContain};QVirtualShelfItem.prototype.isAnswered=function(a){if(!this._widget){return null}if(typeof a==="boolean"&&this._cache._isAnswered!==a){this._cache._isAnswered=a;if(!a){this.qtyDropdown(true)}this.toggleSelect(a)}return this._cache._isAnswered};QVirtualShelfItem.prototype.toggleMouseOver=function(b){if(!this._widget||this._cache._isAnswered){return false}var c=this._params,a=this._cache.nodes};QVirtualShelfItem.prototype.toggleSelect=function(b){if(!this._widget){return false}var e=this._params,a=this._cache.nodes,d=(a.stamp.parentNode&&a.stamp.parentNode.nodeType===1),f=(b)?e.select_alpha*0.01:1,c=a.productContain.firstChild.children[a.productContain.firstChild.children.length-1];if(d){a.stamp.style.display=(b)?"block":"none"}$(a.productContain).stop();$(a.productContain).animate({opacity:f},e.animate_duration);c.style.border=(b)?e.select_border_width+"px "+e.select_border_style+" #"+e.select_border_color:"";c.style.marginLeft=(b)?-e.select_border_width+"px":"";c.style.marginTop=c.style.marginLeft};function QVirtualShelfCart(l,d){var h=this,k=document,n=(l&&l.nodeType===1)?l:k.body,j=k.createElement("div"),e=k.createElement("label"),i=k.createElement("div"),a=k.createElement("div"),m=k.createElement("label"),c=k.createElement("label"),g=k.createElement("div"),b=undefined,f=false;j.className="qvs_cart_view";j.style.position="relative";j.style.display="none";j.style.top=j.style.left=j.style.right=j.style.bottom="0px";e.className="qvs_cart_header";e.style.cssText+=";".concat("-webkit-box-sizing: border-box");e.style.cssText+=";".concat("-moz-box-sizing: border-box");e.style.cssText+=";".concat("box-sizing: border-box");e.style.position="relative";e.style.overflow="hidden";e.style.display="block";e.style.width="100%";e.style.whiteSpace="nowrap";i.className="qvs_cart_item_container";i.style.position="relative";i.style.width="100%";a.className="qvs_cart_text_container";a.style.cssText+=";".concat("-webkit-box-sizing: border-box");a.style.cssText+=";".concat("-moz-box-sizing: border-box");a.style.cssText+=";".concat("box-sizing: border-box");a.style.position="relative";a.style.width="100%";m.className="qvs_cart_itemtotal_label";m.style.position="relative";m.style.display="block";m.style.overflow="hidden";m.style.width="100%";m.style.whiteSpace="nowrap";c.className="qvs_cart_total_label";c.style.position="relative";c.style.display="block";c.style.overflow="hidden";c.style.width="100%";c.style.whiteSpace="nowrap";g.className="qvs_cart_back_button";g.style.cssText+=";".concat("-webkit-box-sizing: border-box");g.style.cssText+=";".concat("-moz-box-sizing: border-box");g.style.cssText+=";".concat("box-sizing: border-box");g.style.position="relative";g.style.display="inline-block";g.style.verticalAlign="top";g.style.cursor="pointer";b=g.cloneNode(true);b.className="qvs_cart_next_button";a.appendChild(m);a.appendChild(c);j.appendChild(e);j.appendChild(i);j.appendChild(a);j.appendChild(g);j.appendChild(b);n.appendChild(j);this._events={change:"change.qvs_cart",click:(!QUtility.isMSTouch())?((!QUtility.isTouchDevice())?"click.qvs_cart mousedown.qvs_cart mouseup.qvs_cart":"touchstart.qvs_cart touchend.qvs_cart touchmove.qvs_cart"):((!QUtility.isTouchDevice())?"click.qvs_cart mousedown.qvs_cart mouseup.qvs_cart":((window.PointerEvent)?"pointerdown.qvs_cart pointerup.qvs_cart":"MSPointerDown.qvs_cart MSPointerUp.qvs_cart"))};this._widget=j;this._params={};this._cache={};this._cache._currency="";this._cache._isCurFront=true;this._cache._cartTotal=0;this._cache._cartItemCnt=0;this._cache.nodes={header:e,itemContain:i,txtContain:a,itemTotalLabel:m,totalLabel:c,backBtn:g,nextBtn:b};this.config(d);$([b,g]).on(this._events.click,function(o){o.stopPropagation();if(o.type!=="touchmove"){if(o.type!=="mousedown"&&o.type!=="mouseup"&&o.type!=="touchstart"&&o.type!=="pointerdown"&&o.type!=="MSPointerDown"){if(f){return}if(o.currentTarget===b){if(!b.enabled){return}if(h._params.next_callback){h._params.next_callback()}}else{h.hide();if(h._params.back_callback){h._params.back_callback()}}}else{f=false}}else{f=true}})}QVirtualShelfCart.prototype.initConfigMap=function(){if(this._configMap===undefined){this._configMap={isRTL:{value:false,type:"boolean"},display_price:{value:true,type:"boolean"},display_qty:{value:true,type:"boolean"},width:{value:600,type:"number",min:1},height:{value:400,type:"number",min:1},padding:{value:10,type:"number",min:0},top:{value:0,type:"number"},left:{value:0,type:"number"},cap_value:{value:-1,type:"number",min:2},total_precision:{value:2,type:"number",min:0},qty_limit:{value:10,type:"number",min:1},primary_font_family:{value:"",type:"string"},header_text:{value:"Shopping Cart",type:"string"},qty_text:{value:"Qty:",type:"string"},total_text:{value:"Total: ",type:"string"},item_text:{value:"Number of Items: ",type:"string"},backbtn_text:{value:"Continue Shopping ",type:"string"},nextbtn_text:{value:"Checkout",type:"string"},removebtn_text:{value:"Remove",type:"string"},header_fontsize:{value:18,type:"number",min:5},label_fontsize:{value:18,type:"number",min:5},price_fontsize:{value:18,type:"number",min:5},total_fontsize:{value:18,type:"number",min:5},header_fontcolor:{value:0,type:"color"},label_fontcolor:{value:0,type:"color"},price_fontcolor:{value:0,type:"color"},total_fontcolor:{value:0,type:"color"}}}};QVirtualShelfCart.prototype.config=function(a){if(!this._widget){return null}if(typeof a!=="object"){return this._params}else{if(this._configMap===undefined){this.initConfigMap();VirtualShelf.prototype.setParams.apply(this,[this._configMap,true])}VirtualShelf.prototype.setParams.apply(this,[a]);this._params.itemViewArry=(jQuery.isArray(a.itemViewArry))?a.itemViewArry:(this._params.itemViewArry||undefined);this._params.back_callback=(a.back_callback&&typeof a.back_callback==="function")?a.back_callback:(this._params.back_callback||undefined);this._params.next_callback=(a.next_callback&&typeof a.next_callback==="function")?a.next_callback:(this._params.next_callback||undefined);this._params.remove_callback=(a.remove_callback&&typeof a.remove_callback==="function")?a.remove_callback:(this._params.remove_callback||undefined);this._params.dropdown_change_callback=(a.dropdown_change_callback&&typeof a.dropdown_change_callback==="function")?a.dropdown_change_callback:(this._params.dropdown_change_callback||undefined);this._params.dropdown_click_callback=(a.dropdown_click_callback&&typeof a.dropdown_click_callback==="function")?a.dropdown_click_callback:(this._params.dropdown_click_callback||undefined);this.update();a=null;return this}};QVirtualShelfCart.prototype.update=function(){if(!this._widget){return false}var g=this._params,e=this._cache.nodes,d=this._widget,c=(jQuery.trim(g.header_text).length>0),f=(g.display_qty||g.display_price),b=50,a=18;d.dir=(!g.isRTL)?"LTR":"RTL";d.style.width=g.width+"px";d.style.height="auto";d.style.border="2px solid #CCC";d.style.backgroundColor="#FFF";d.style.fontFamily=g.primary_font_family;d.style[(!g.isRTL)?"left":"right"]=g.left+"px";d.style.top=g.top+"px";if(c){e.header.style.display=(c)?"block":"none";e.header.style.padding=(c)?g.padding+"px":"";e.header.style.fontSize=QUtility.convertPxtoEM(g.header_fontsize)+"em";e.header.style.color="#"+g.header_fontcolor;e.header.style.backgroundColor="#EEE";$(e.header).html(g.header_text);d.insertBefore(e.header,d.firstChild)}else{if(e.header.parentNode&&e.header.parentNode.nodeType===1){e.header.parentNode.removeChild(e.header)}}e.itemContain.style.borderTop=(c)?"2px solid #CCC":"";e.itemContain.style.maxHeight=g.height+"px";e.itemContain.style.overflowX="hidden";e.itemContain.style.overflowY="auto";e.txtContain.style.display=(f)?"block":"none";e.txtContain.style.borderTop=(f)?"2px solid #CCC":"";e.txtContain.style.padding=(f)?g.padding+"px":"";e.txtContain.style.height="auto";e.txtContain.style.textAlign=(!g.isRTL)?"right":"left";e.txtContain.style.fontSize=QUtility.convertPxtoEM(g.total_fontsize)+"em";e.txtContain.style.color="#"+g.total_fontcolor;e.txtContain.style.backgroundColor="#EEE";e.itemTotalLabel.style.display=(g.display_qty)?"block":"none";e.itemTotalLabel.style.paddingBottom=(g.display_price)?"4px":"";$(e.itemTotalLabel).html(g.item_text);e.totalLabel.style.display=(g.display_price)?"block":"none";$(e.totalLabel).html(g.total_text+" "+g.itemViewArry[0].config().price);e.backBtn.style.width=g.width*0.5+"px";e.backBtn.style.height=b+"px";e.backBtn.style.lineHeight=b+"px";e.backBtn.style.textAlign="center";e.backBtn.style.fontSize=QUtility.convertPxtoEM(a)+"em";e.backBtn.style.backgroundColor="#f9bdbb";e.backBtn.style.border="2px solid #757575";e.backBtn.style.borderRightWidth="1px";$(e.backBtn).html(g.backbtn_text);e.nextBtn.style.width=g.width*0.5+"px";e.nextBtn.style.height=b+"px";e.nextBtn.style.lineHeight=b+"px";e.nextBtn.style.textAlign="center";e.nextBtn.style.fontSize=QUtility.convertPxtoEM(a)+"em";e.nextBtn.style.backgroundColor="#dce775";e.nextBtn.style.border="2px solid #757575";e.nextBtn.style.borderLeftWidth="1px";$(e.nextBtn).html(g.nextbtn_text);e.nextBtn.enabled=!(g.cap_value>=2);e.nextBtn.style.cursor=(e.nextBtn.enabled)?"pointer":"default";$(e.nextBtn).css({opacity:(e.nextBtn.enabled)?1:0.5})};QVirtualShelfCart.prototype.show=function(){if(!this._widget||!(jQuery.isArray(this._params.itemViewArry)&&this._params.itemViewArry.length>0)){return false}var e=this._cache.nodes,d=this._widget,g=this._params,c=g.itemViewArry,b=0,f=c.length;for(b=0;b<f;b+=1){if(c[b].isAnswered()){var a=this.createCartItem(c[b]);if(e.itemContain.children.length>0){a.style.borderTop="1px solid #CCC"}e.itemContain.appendChild(a)}}if((g.cap_value>=2)&&(e.nextBtn.enabled!==(g.cap_value===this._cache._cartItemCnt))){e.nextBtn.enabled=(g.cap_value===this._cache._cartItemCnt);e.nextBtn.style.cursor=(e.nextBtn.enabled)?"pointer":"default";$(e.nextBtn).css({opacity:(e.nextBtn.enabled)?1:0.5})}d.style.display="block";d.style.height=($(e.header).outerHeight()+$(e.itemContain).outerHeight()+$(e.txtContain).outerHeight()+$(e.backBtn).outerHeight())+"px"};QVirtualShelfCart.prototype.hide=function(){if(!this._widget||this._widget.style.display==="none"){return false}this._widget.style.display="none";this._cache._cartTotal=0;this._cache._cartItemCnt=0;$(this._cache.nodes.itemContain).scrollTop(0);while(this._cache.nodes.itemContain.children.length){this._cache.nodes.itemContain.removeChild(this._cache.nodes.itemContain.firstChild)}};QVirtualShelfCart.prototype.createCartItem=function(j){if(!(j&&j instanceof QVirtualShelfItem)){return false}var l=this,E=document,B=this._params,s=this._cache.nodes,c=E.createElement("div"),r=E.createElement("div"),n=E.createElement("img"),u=E.createElement("div"),m=E.createElement("label"),x=undefined,o=E.createElement("div"),C=E.createElement("label"),t=E.createElement("select"),k=E.createElement("div"),F=j.config(),A=F.index,w=jQuery.trim(F.price),h=w.match(/\d+/g),g=(h&&h.length>0),f=(g)?parseFloat(h[0]+"."+h[1]):0,z=10,e=5,p=0,v=120,D=(jQuery.trim(B.qty_text).length>0),d=false,b=F.image.split(",");var q=function(){var i=(l._cache._isCurFront)?l._cache._currency+l._cache._cartTotal.toFixed(B.total_precision):l._cache._cartTotal.toFixed(B.total_precision)+l._cache._currency;$(s.itemTotalLabel).html(B.item_text+" "+l._cache._cartItemCnt);$(s.totalLabel).html(B.total_text+" "+i)};c.className="qvs_cart_item_view";c.style.cssText+=";".concat("-webkit-box-sizing: border-box");c.style.cssText+=";".concat("-moz-box-sizing: border-box");c.style.cssText+=";".concat("box-sizing: border-box");c.style.position="relative";c.style.width="100%";c.style.height="auto";c.style.padding=z+"px";c.style.fontFamily=B.primary_font_family;r.style.position="relative";r.style.display="inline-block";r.style.verticalAlign="top";(QUtility.ieVersion()!==8)?r.style.width="20%":r.style.width=(B.width*0.18)+"px";r.style.height=v+"px";n.style.cssText="filter: inherit; width: auto; height: auto;";n.style.maxWidth=r.style.width;n.style.maxHeight=r.style.height;n.style.position="absolute";n.style.visibility="hidden";n.src=b[0];$(n).on("load.qvs_cart_thumb",function(){$(this).off("load.qvs_cart_thumb");E.body.appendChild(this);p=$(r).outerWidth();this.style.maxWidth=p+"px";this.style.left=(p-$(this).width())*0.5+"px";this.style.top=(v-$(this).height())*0.5+"px";r.appendChild(n);this.style.visibility=""}).attr("src",b[0]);u.style.position="relative";u.style.display="inline-block";u.style.width="80%";u.style.verticalAlign="top";u.style.textAlign=(!B.isRTL)?"right":"left";m.style.cssText+=";".concat("-webkit-box-sizing: border-box");m.style.cssText+=";".concat("-moz-box-sizing: border-box");m.style.cssText+=";".concat("box-sizing: border-box");m.style.fontSize=QUtility.convertPxtoEM(B.label_fontsize)+"em";m.style.color="#"+B.label_fontcolor;m.style.padding=e+"px";m.style.position="relative";m.style.display="block";m.style.whiteSpace="nowrap";m.style.overflow="hidden";m.style.borderBottom=(B.display_qty||B.display_price)?"1px solid #EEEEEE":"";$(m).html(F.label);x=m.cloneNode(true);x.style.borderBottom=(B.display_qty)?"1px solid #EEEEEE":"";x.style.fontSize=QUtility.convertPxtoEM(B.price_fontsize)+"em";x.style.color="#"+B.price_fontcolor;$(x).html(w);o.style.cssText+=";".concat("-webkit-box-sizing: border-box");o.style.cssText+=";".concat("-moz-box-sizing: border-box");o.style.cssText+=";".concat("box-sizing: border-box");o.style.padding=e+"px";o.style.fontSize=m.style.fontSize;o.style.color=m.style.color;if(D){C.style.fontSize=QUtility.convertPxtoEM(14)+"em";C.style.color="#000";C.style.position="relative";C.style.display="inline-block";C.style.verticalAlign="top";C.style.whiteSpace="nowrap";$(C).html(B.qty_text)}t.style.position="relative";t.style.display="inline-block";t.style.verticalAlign="top";t.style[(!B.isRTL)?"marginLeft":"marginRight"]=5+"px";t.style.fontSize=C.style.fontSize;t.style.color=C.style.color;t.style.padding=0;t.style.width="auto";t.style.top=0;t.style.left=0;for(var y=0;y<=B.qty_limit;y+=1){var a=E.createElement("option");a.id="btn_id_"+y;a.className="qvs_popout_dropdown_option";a.value=y;a.style.display=(y>0)?"block":"none";$(a).html(a.value);t.appendChild(a)}k.style.cssText+=";".concat("-webkit-box-sizing: border-box");k.style.cssText+=";".concat("-moz-box-sizing: border-box");k.style.cssText+=";".concat("box-sizing: border-box");k.style.position="relative";k.style.display="inline-block";k.style.border="2px solid #CCC";k.style.color="#FF5252";k.style.fontSize=QUtility.convertPxtoEM(15)+"em";k.style.width="auto";k.style.height="auto";k.style.padding=4+"px";k.style.whiteSpace="nowrap";k.style.textAlign="center";k.style.cursor="pointer";$(k).html(B.removebtn_text||"-");r.appendChild(n);if(D){o.appendChild(C)}o.appendChild(t);u.appendChild(m);if(B.display_price&&g){u.appendChild(x)}if(B.display_qty){u.appendChild(o)}u.appendChild(k);c.appendChild(r);c.appendChild(u);t.selectedIndex=j.qtyDropdown().selectedIndex;if(this._cache._currency===""){this._cache._currency=(w.replace(/[0-9.]/g,""));this._cache._isCurFront=(w.indexOf(this._cache._currency)===0)}l._cache._cartTotal+=(f*t.selectedIndex);l._cache._cartItemCnt+=t.selectedIndex;q();$(t).on(this._events.click,function(J){J.stopImmediatePropagation();if(l._params.dropdown_click_callback){if(J.type==="click"||J.type==="mouseup"){return}var G=l._params.itemViewArry[A],K=l._params.dropdown_click_callback();if(QUtility.isNumber(K)){if(G.isAnswered()){K+=G.qtyDropdown().selectedIndex}for(var I=0;I<this.children.length;I+=1){var H=this.children[I];H.disabled=((K>0&&I>K)||K===0)}}}});$(t).on(this._events.change,function(H){var i=l._params.itemViewArry[A],G=i.qtyDropdown().selectedIndex;if(G>=0){l._cache._cartTotal-=(f*G);l._cache._cartItemCnt-=G}l._cache._cartTotal+=(f*this.selectedIndex);l._cache._cartItemCnt+=this.selectedIndex;q();i.qtyDropdown().selectedIndex=this.selectedIndex;if((B.cap_value>=2)&&(s.nextBtn.enabled!==(B.cap_value===l._cache._cartItemCnt))){s.nextBtn.enabled=(B.cap_value===l._cache._cartItemCnt);s.nextBtn.style.cursor=(s.nextBtn.enabled)?"pointer":"default";$(s.nextBtn).css({opacity:(s.nextBtn.enabled)?1:0.5})}if(l._params.dropdown_change_callback){l._params.dropdown_change_callback(i.config().index,this.selectedIndex)}});$(k).on(this._events.click,function(G){G.stopPropagation();if(G.type!=="touchmove"){if(G.type!=="mousedown"&&G.type!=="mouseup"&&G.type!=="touchstart"&&G.type!=="pointerdown"&&G.type!=="MSPointerDown"){if(d){return}var i=l._params.itemViewArry[A];c.parentNode.removeChild(c);l._cache._cartTotal-=(f*t.selectedIndex);l._cache._cartItemCnt-=t.selectedIndex;q();i.qtyDropdown(true);if((B.cap_value>=2)&&(s.nextBtn.enabled!==(B.cap_value===l._cache._cartItemCnt))){s.nextBtn.enabled=(B.cap_value===l._cache._cartItemCnt);s.nextBtn.style.cursor=(s.nextBtn.enabled)?"pointer":"default";$(s.nextBtn).css({opacity:(s.nextBtn.enabled)?1:0.5})}l._widget.style.height=($(s.header).outerHeight()+$(s.itemContain).outerHeight()+$(s.txtContain).outerHeight()+$(s.backBtn).outerHeight())+"px";if(!s.itemContain.children.length){l.hide();if(l._params.back_callback){l._params.back_callback()}}if(l._params.remove_callback){l._params.remove_callback(i)}}else{d=false}}else{d=true}});return c};function QVirtualShelfPopout(l,a){var h=this,k=document,n=(l&&l.nodeType===1)?l:k.body,m=k.createElement("div"),c=k.createElement("div"),i=k.createElement("div"),e=k.createElement("label"),b=k.createElement("div"),g=k.createElement("div"),d=k.createElement("label"),f=false;m.className="qvs_popout_view";m.style.position="absolute";m.style.top="0px";m.style.left="0px";m.style.zIndex=4000;m.style.display="none";c.className="qvs_popout_overlay";c.style.cssText="position: absolute; top: 0px; left: 0px; margin: 0px; padding: 0px";i.className="qvs_popout_gallery";i.style.position="absolute";i.style.MozBoxShadow=i.style.webkitBoxShadow=i.style.boxShadow="1px 1px 8px #333";e.className="qvs_popout_header";e.style.cssText+=";".concat("-webkit-box-sizing: border-box");e.style.cssText+=";".concat("-moz-box-sizing: border-box");e.style.cssText+=";".concat("box-sizing: border-box");e.style.position="relative";e.style.display="block";e.style.overflow="hidden";e.style.width="100%";e.style.whiteSpace="nowrap";b.className="qvs_popout_image_container";b.style.position="relative";b.style.display="block";b.style.width="100%";g.className="qvs_popout_thumb_container";g.style.cssText+=";".concat("-webkit-box-sizing: border-box");g.style.cssText+=";".concat("-moz-box-sizing: border-box");g.style.cssText+=";".concat("box-sizing: border-box");g.style.position="relative";g.style.display="block";g.style.overflow="hidden";g.style.width="100%";d.className="qvs_popout_description";d.style.cssText+=";".concat("-webkit-box-sizing: border-box");d.style.cssText+=";".concat("-moz-box-sizing: border-box");d.style.cssText+=";".concat("box-sizing: border-box");d.style.position="relative";d.style.display="block";d.style.width="100%";d.style.height="auto";d.style.wordWrap="break-word";d.style.whiteSpace="normal";d.style.overflowX="hidden";d.style.overflowY="auto";i.appendChild(e);i.appendChild(b);i.appendChild(g);i.appendChild(d);m.appendChild(c);m.appendChild(i);n.appendChild(m);this._events={mousewheel:"mousewheel.qvs_popout",mouseenter:"mouseenter.qvs_popout",resize:"resize.qvs_popout",change:"change.qvs_popout",click:(!QUtility.isMSTouch())?((!QUtility.isTouchDevice())?"click.qvs_popout":"touchstart.qvs_popout touchend.qvs_popout touchmove.qvs_popout"):((!QUtility.isTouchDevice())?"click.qvs_popout":((window.PointerEvent)?"pointerdown.qvs_popout pointerup.qvs_popout":"MSPointerDown.qvs_popout MSPointerUp.qvs_popout"))};this._widget=m;this._params={};this._cache={};this._cache._curImgThmb=undefined;this._cache._curItemView=undefined;this._cache._minContentWidth=300;this._cache._minContentImgHeight=260;this._cache._thumbContainHeight=75;this._cache._containDescrHeight=65;this._cache._curheaderHeight=0;this._cache._curThumbContainHeight=0;this._cache._curContainDescrHeight=0;this._cache.nodes={overlay:c,content:i,header:e,contentImgContain:b,thumbContain:g,contentDescr:d};this.config(a);var j=function(o){var p=b.firstChild;if(p){if(h._cache._curImgThmb){h._cache._curImgThmb.style.borderColor="#CCC";h._cache._curImgThmb=undefined}h._cache._curImgThmb=o.currentTarget;h._cache._curImgThmb.style.borderColor="#F44336";p.src=h._cache._curImgThmb.firstChild.src;p.style[(!h._params.isRTL)?"left":"right"]=($(b).outerWidth()-$(p).outerWidth())*0.5+"px";p.style.top=($(b).outerHeight()-$(p).outerHeight())*0.5+"px"}};$(window).on(this._events.resize,function(){h.resize();h.center()});if(!QUtility.isTouchDevice()){$(g).on(this._events.mouseenter,".qvs_popout_image_thumb",function(o){j(o)})}else{$(g).on(this._events.click,".qvs_popout_image_thumb",function(o){if(o.type!=="touchmove"){if(o.type!=="touchstart"&&o.type!=="pointerdown"&&o.type!=="MSPointerDown"){if(!f){j(o)}}else{f=false}}else{f=true}})}$([b,e]).on(this._events.click,function(o){o.stopPropagation();if(o.type!=="touchmove"){if(o.type!=="touchstart"&&o.type!=="pointerdown"&&o.type!=="MSPointerDown"){if(f){return}h.hide()}else{f=false}}else{f=true}})}QVirtualShelfPopout.prototype.initConfigMap=function(){if(this._configMap===undefined){this._configMap={isRTL:{value:false,type:"boolean"},width:{value:600,type:"number",min:1},padding:{value:10,type:"number",min:0},overlay_opacity:{value:80,type:"number",min:0},descr_fontsize:{value:16,type:"number",min:5},primary_font_family:{value:"",type:"string"},header_text:{value:"click image to close",type:"string"},descr_align:{value:"left",type:"string",options:["left","right","center"]},bckgrnd_color:{value:16777215,type:"color"},overlay_color:{value:0,type:"color"},descr_color:{value:0,type:"color"}}}};QVirtualShelfPopout.prototype.config=function(a){if(!this._widget){return null}if(typeof a!=="object"){return this._params}else{if(this._configMap===undefined){this.initConfigMap();VirtualShelf.prototype.setParams.apply(this,[this._configMap,true])}VirtualShelf.prototype.setParams.apply(this,[a]);this.update();a=null;return this}};QVirtualShelfPopout.prototype.update=function(){if(!this._widget){return false}var b=document,c=this._params,a=this._cache.nodes;$(a.overlay).css({"background-color":"#"+c.overlay_color,width:$(b).width()+"px",height:$(b).height()+"px",opacity:c.overlay_opacity*0.01});a.content.dir=(!c.isRTL)?"LTR":"RTL";a.content.style.minWidth=this._cache._minContentWidth+"px";a.content.style.maxWidth=c.width+"px";a.content.style.height="auto";a.content.style.backgroundColor="#"+c.bckgrnd_color;a.content.style.fontFamily=c.primary_font_family;if(c.header_text.length>0){a.content.insertBefore(a.header,a.content.firstChild);a.header.style.textAlign="center";a.header.style.fontSize=QUtility.convertPxtoEM(16)+"em";a.header.style.color="#555";a.header.style.borderBottom="2px solid #CCC";a.header.style.padding=((c.header_text.length>0)?5:0)+"px";$(a.header).html(c.header_text)}else{if(a.header.parentNode&&a.header.parentNode.nodeType===1){a.header.parentNode.removeChild(a.header)}}a.contentImgContain.style.minHeight=this._cache._minContentImgHeight+"px";a.thumbContain.style.height=this._cache._thumbContainHeight+"px";a.contentDescr.style.height=this._cache._containDescrHeight+"px";a.contentDescr.style.borderTop="2px solid #CCC";a.contentDescr.style.fontSize=QUtility.convertPxtoEM(c.descr_fontsize)+"em";a.contentDescr.style.textAlign=(!c.isRTL)?c.descr_align:(c.descr_align!=="left")?c.descr_align:"";a.contentDescr.style.color="#"+c.descr_color};QVirtualShelfPopout.prototype.show=function(h){if(!this._widget||!(h&&h instanceof QVirtualShelfItem)){return false}var k=document,e=this._params,l=this._widget,d=this._cache.nodes,j=h.config(),g=k.createElement("img"),b=j.image.split(","),a=0,c=0;var m=function(o){if(QUtility.isString(o)&&jQuery.trim(o).length>0){var i=k.createElement("div"),n=k.createElement("img");i.appendChild(n);d.thumbContain.appendChild(i);i.className="qvs_popout_image_thumb";i.style.position="relative";i.style.display="inline-block";i.style.width=46+"px";i.style.height=46+"px";i.style.padding=4+"px";i.style.border="1px solid #CCC";i.style.marginRight=10+"px";n.style.cssText="filter: inherit; width: auto; height: auto; margin: auto;";n.style.position="absolute";n.style.maxWidth=i.style.width;n.style.maxHeight=i.style.height;n.style.top=n.style.left=n.style.bottom=n.style.right=0;n.src=o}};if(QUtility.isTouchDevice()){if(this._cache.metaTag===undefined){this._cache.metaTag=k.createElement("meta");this._cache.metaTag.id="qvirtualshelf_meta_scale";this._cache.metaTag.name="viewport";k.getElementsByTagName("head")[0].appendChild(this._cache.metaTag)}this._cache.metaTag.content="width=device-width, user-scalable=no"}l.style.display="block";this._cache._curItemView=h;this._cache._curheaderHeight=$(d.header).outerHeight();while(d.thumbContain.firstChild){d.thumbContain.removeChild(d.thumbContain.firstChild)}if(b.length>1){$(d.thumbContain).insertAfter(d.contentImgContain);for(var f=0;f<b.length;f+=1){m(b[f])}this._cache._curImgThmb=d.thumbContain.firstChild;this._cache._curImgThmb.style.borderColor="#F44336"}else{if(d.thumbContain.parentNode&&d.thumbContain.parentNode.nodeType===1){d.thumbContain.parentNode.removeChild(d.thumbContain)}}this._cache._curThumbContainHeight=((b.length>1)?this._cache._thumbContainHeight:0);d.thumbContain.style.height=this._cache._curThumbContainHeight+"px";d.thumbContain.style.padding=((b.length>1)?e.padding:0)+"px";this._cache._curContainDescrHeight=((j.description.length>0)?this._cache._containDescrHeight:0);d.contentDescr.style.height=this._cache._curContainDescrHeight+"px";d.contentDescr.style.padding=((j.description.length>0)?e.padding:0)+"px";if(j.description.length>0){d.content.appendChild(d.contentDescr);$(d.contentDescr).html(j.description)}else{if(d.contentDescr.parentNode&&d.contentDescr.parentNode.nodeType===1){d.contentDescr.parentNode.removeChild(d.contentDescr)}}this.resize();this.center();a=$(d.contentImgContain).outerWidth();c=$(d.contentImgContain).outerHeight();g.style.cssText="filter: inherit; width: auto; height: auto;";g.style.cssText+=";".concat("-webkit-box-sizing: border-box");g.style.cssText+=";".concat("-moz-box-sizing: border-box");g.style.cssText+=";".concat("box-sizing: border-box");g.style.padding=e.padding+"px";g.style.maxWidth=a+"px";g.style.maxHeight=c+"px";g.style.position="absolute";g.style.visibility="hidden";g.src=b[0];$(g).on("load.qvirtualshelf",function(){$(this).off("load.qvirtualshelf");k.body.appendChild(this);this.style[(!e.isRTL)?"left":"right"]=(a-$(this).outerWidth())*0.5+"px";this.style.top=(c-$(this).outerHeight())*0.5+"px";while(d.contentImgContain.firstChild){d.contentImgContain.removeChild(d.contentImgContain.firstChild)}d.contentImgContain.appendChild(this);this.style.visibility=""}).attr("src",b[0])};QVirtualShelfPopout.prototype.hide=function(){if(!this._widget||this._widget.style.display==="none"){return false}this._widget.style.display="none";var b=document,a=this._cache.nodes;b.body.style.height=this._cache._bodyStyle.height;b.body.style.overflow=this._cache._bodyStyle.overflow;delete this._cache._bodyStyle;$(b.body).off(this._events.mousewheel);$(a.contentDescr).scrollTop(0);if(this._cache._curItemView!==undefined){this._cache._curItemView=undefined}if(this._cache.metaTag){this._cache.metaTag.content="width=device-width, user-scalable=yes"}};QVirtualShelfPopout.prototype.resize=function(){if(!this._widget||this._widget.style.display==="none"){return false}var h=document,b=window,e=this._cache.nodes,f=e.contentImgContain.firstChild,g=$(b).width(),i=$(b).height(),c=25,a=Math.min((g-c),this._params.width),d=(i-c-this._cache._curheaderHeight-this._cache._curThumbContainHeight-this._cache._curContainDescrHeight);if(this._cache._bodyStyle===undefined){this._cache._bodyStyle={height:h.body.style.height,overflow:h.body.style.overflow};h.body.style.height="100%";h.body.style.overflow="hidden";$(h.body).on(this._events.mousewheel,function(j){j.preventDefault()})}e.content.style.width=a+"px";e.contentImgContain.style.height=d+"px";if(f){f.style.maxWidth=Math.max(a,this._cache._minContentWidth)+"px";f.style.maxHeight=Math.max(d,this._cache._minContentImgHeight)+"px"}e.overlay.style.height=$(h).height()+"px";e.overlay.style.width=$(h).width()+"px"};QVirtualShelfPopout.prototype.center=function(){if(!this._widget||this._widget.style.display==="none"){return false}var c=window,d=this._cache.nodes,b=d.contentImgContain.firstChild,a=$(c).scrollLeft()+($(c).width()/2)-($(d.content).outerWidth()/2),e=$(c).scrollTop()+($(c).height()/2)-($(d.content).outerHeight()/2);if(a<0){a=0}if(e<0){e=0}d.content.style.left=a+"px";d.content.style.top=e+"px";if(b){b.style[(!this._params.isRTL)?"left":"right"]=($(d.contentImgContain).outerWidth()-$(b).outerWidth())*0.5+"px";b.style.top=($(d.contentImgContain).outerHeight()-$(b).outerHeight())*0.5+"px"}};